<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal">
<head>
<meta http-equiv="content-type" content="text/xml+xhtml; charset=utf-8" />
<title>Liste des démos</title>
<meta name="keywords" content="python web application" />
<meta name="description" content="repoze.bfg web application" />
<script type="text/javascript" src="${request.application_url}/static/jquery-1.4.1.min.js"></script>
<link href="${request.application_url}/static/default.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="${request.application_url}/static/functions.js"></script>
<script type="text/javascript">
$('document').ready(function(){
    jQuery('#sidebar').css(
        'height',
        $(window).height()-130+'px'
        );
    }
)
</script>
</head>

<body>
<!-- start header -->
<!--div tal:content="demos">debug</div-->
<!--div id="debug"></div-->

<table id="layout" cellspacing="0" cellpadding="0">
    <tr>
        <td id="logo">
            <a href="${request.application_url}"><img src="${request.application_url}/static/images/Alter_Way_SOLUTIONS.png"/></a>
        </td>
        <td id="title">
            Applications de démonstration.
        </td>
    </tr>
    <tr>
        <td id="sidebar">
        <div id="user_ID">
            connecté en tant que: ${logged_in}<br/> <a
            href='${request.application_url}/logout'> se déconnecter</a>
        </div>

            <form id="app_form" method="POST"
            action="${request.application_url}/action">
                <div>créer une démo</div>
                <select name="app"
                onchange="update_app_form('${request.application_url}', this.value)">
                <option></option>
                <option tal:repeat="app apps" tal:content="python:app">placeholder</option>
                </select>
                <span id="app_form_dynamic"></span>
                <img id="loading" style="display:none;"
                src="admin/static/images/loading.gif" /><br />
            </form>
        </td>
        <td id="content">
            <div id="message"
                 tal:condition="python: 'message' in request.environ['beaker.session']"
                 tal:content="python:request.environ['beaker.session']['message']">
                    message placeholder
            </div>
            <table id="demos_list">
                <tr tal:repeat="demo demos">
                  <td><a tal:attributes="href python:'/'+demo['name']" tal:content="python: demo['name']">blob</a></td>
                    <td>
                        <button tal:content="python:demo['autostart'] and 'activate' or 'deactivate'" >
                        </button>
                    </td>
                    <td><button>reset</button></td>
                    <tal:repeat tal:repeat="cmd python: ['start', 'stop', 'restart']" >
                    <td><button tal:attributes="
                        onclick python:'window.location.href=\''+request.application_url+'/daemon?NAME='+demo['name']+'&amp;COMMAND='+cmd+'\''
                        " tal:content="cmd">restart</button>
                    </td>
                    </tal:repeat>
                    <td><button tal:attributes="
                        onclick python:'window.location.href=\''+request.application_url+'/delete?NAME='+demo['name']+'\''
                        ">delete</button>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <!-- end content -->
        <!-- start footer -->
        <td colspan="2" id="footer">
            Application propulsée par <a href="http://repoze.org">Repoze.BFG</a>
        </td>
    </tr>
</table>
<!-- end footer -->
</body>
</html>
